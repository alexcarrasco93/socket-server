"use strict";(self.webpackChunksockets_app=self.webpackChunksockets_app||[]).push([[695],{5695:(q,g,o)=>{o.r(g),o.d(g,{CuesComponent:()=>m});var c=o(6895),C=o(3252),t=o(8274),_=o(1135),h=o(5577),f=o(3568),Z=o(8223);class p{constructor(e){this.wsService=e,this._ticketsToAttend$=new _.X(void 0),this.ticketsToAttendSocket$=this.wsService.listen("get-tickets-to-attend"),this.ticketsToAttend$=this._ticketsToAttend$.pipe((0,h.z)(()=>this.ticketsToAttendSocket$),(0,f.d)(1)),this._attendingTickets$=new _.X(void 0),this.attendingTicketsSocket$=this.wsService.listen("get-attending-tickets"),this.attendingTickets$=this._attendingTickets$.pipe((0,h.z)(()=>this.attendingTicketsSocket$),(0,f.d)(1)),this.emitGetAttendingTickets()}emitGetTicketsToAttend(){this.wsService.emit("get-tickets-to-attend")}emitGetAttendingTickets(){this.wsService.emit("get-attending-tickets")}newTicket(){this.wsService.emit("new-ticket")}attendTicket(e,n){this.wsService.emit("attend-ticket",{ticket:e,attendedId:n})}}function v(i,e){1&i&&(t.TgZ(0,"h4"),t._uU(1,"There are no tickets to attend"),t.qZA())}function A(i,e){if(1&i&&(t.TgZ(0,"h4"),t._uU(1,"Attending to "),t.TgZ(2,"small"),t._uU(3),t.qZA()()),2&i){const n=t.oxw();t.xp6(3),t.Oqu(n.currentTicket.id)}}function w(i,e){1&i&&(t.TgZ(0,"h4"),t._uU(1,"Click the button to attend a ticket"),t.qZA())}p.\u0275fac=function(e){return new(e||p)(t.LFG(Z.i))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});class r{constructor(e){this.ticketsService=e,this.tickets=[],this.attend=new t.vpe}ngOnInit(){this.ticketsService.emitGetTicketsToAttend()}attendToTicket(){const e=this.tickets[0];e.desktop=this.desktop,this.attend.emit({ticket:e,attendedId:this.currentTicket?.id}),this.currentTicket=e}}r.\u0275fac=function(e){return new(e||r)(t.Y36(p))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-desktop"]],inputs:{tickets:"tickets",desktop:"desktop"},outputs:{attend:"attend"},standalone:!0,features:[t.jDz],decls:8,vars:4,consts:[[4,"ngIf"],[1,"btn","btn-primary","btn-lg",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Desktop"),t.qZA(),t.YNc(2,v,2,0,"h4",0),t.YNc(3,A,4,1,"h4",0),t.YNc(4,w,2,0,"h4",0),t._UZ(5,"hr"),t.TgZ(6,"button",1),t.NdJ("click",function(){return n.attendToTicket()}),t._uU(7," Attend the next ticket\n"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",0===(null==n.tickets?null:n.tickets.length)),t.xp6(1),t.Q6J("ngIf",n.currentTicket),t.xp6(1),t.Q6J("ngIf",!n.currentTicket&&0!==(null==n.tickets?null:n.tickets.length)),t.xp6(2),t.Q6J("disabled",n.tickets&&0===n.tickets.length))},dependencies:[c.ez,c.O5]});var T=o(9054);class k{constructor(e){this.router=e}login(e){!e||this.router.navigate(["/cues/desktop",e])}}function b(i,e){1&i&&(t.TgZ(0,"span",3),t._uU(1," 0 "),t.qZA())}function N(i,e){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.lastTicket.id," ")}}k.\u0275fac=function(e){return new(e||k)(t.Y36(T.F0))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:21,vars:0,consts:[[1,"row"],[1,"col-6"],[1,"list-group"],["routerLink","/cues/public",1,"list-group-item","list-group-item-action"],["routerLink","/cues/new-ticket",1,"list-group-item","list-group-item-action"],["action","desktophtml"],["name","desktop","type","number","placeholder","Desktop","autofocus","","required","",1,"form-control",3,"keyup.enter"],["txtDesktop",""],["type","button",1,"btn","btn-primary","btn-block",3,"click"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"h1"),t._uU(1,"Cues Program"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"div",0)(4,"div",1)(5,"h4"),t._uU(6,"Options"),t.qZA(),t.TgZ(7,"ul",2)(8,"a",3),t._uU(9," Public screen "),t.qZA(),t.TgZ(10,"a",4),t._uU(11," Create Tickets "),t.qZA()()(),t.TgZ(12,"div",1)(13,"h4"),t._uU(14,"Configure desktop"),t.qZA(),t.TgZ(15,"div",5)(16,"input",6,7),t.NdJ("keyup.enter",function(){t.CHM(s);const l=t.MAs(17);return t.KtG(n.login(l.value))}),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"button",8),t.NdJ("click",function(){t.CHM(s);const l=t.MAs(17);return t.KtG(n.login(l.value))}),t._uU(20," Login "),t.qZA()()()()}},dependencies:[c.ez,T.Bz,T.rH]});class u{constructor(e){this.ticketsService=e,this.tickets=[],this.newTicket=new t.vpe}get lastTicket(){return this.tickets[this.tickets.length-1]}ngOnInit(){this.ticketsService.emitGetTicketsToAttend()}createNewTicket(){this.newTicket.emit()}}function y(i,e){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"span",4),t._uU(3),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"span",5),t._uU(6),t.qZA()()()),2&i){const n=e.$implicit;t.xp6(3),t.hij("Ticket ",n.id,""),t.xp6(3),t.hij("Desktop ",n.desktop,"")}}u.\u0275fac=function(e){return new(e||u)(t.Y36(p))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-new-ticket"]],inputs:{tickets:"tickets"},outputs:{newTicket:"newTicket"},standalone:!0,features:[t.jDz],decls:10,vars:2,consts:[["id","lblNewTicket",4,"ngIf","ngIfElse"],["lastTicketTmpl",""],[1,"btn","btn-secondary","btn-lg",3,"click"],["id","lblNewTicket"]],template:function(e,n){if(1&e&&(t.TgZ(0,"table")(1,"tr")(2,"td"),t.YNc(3,b,2,0,"span",0),t.YNc(4,N,2,1,"ng-template",null,1,t.W1O),t.qZA()(),t.TgZ(6,"tr")(7,"td")(8,"button",2),t.NdJ("click",function(){return n.createNewTicket()}),t._uU(9," Generate new ticket "),t.qZA()()()()),2&e){const s=t.MAs(5);t.xp6(3),t.Q6J("ngIf",!n.tickets||0===n.tickets.length)("ngIfElse",s)}},dependencies:[c.ez,c.O5]});class d{constructor(e){this.ticketsService=e,this.tickets=[]}get lastTicket(){return this.tickets?this.tickets[this.tickets.length-1]:void 0}get previousTickets(){return this.tickets?.filter((e,n)=>n<this.tickets.length-1).reverse()}ngOnInit(){this.ticketsService.emitGetAttendingTickets()}ngOnChanges(e){const n=e.tickets?.currentValue,s=e.tickets?.previousValue;!e.tickets.firstChange&&s&&JSON.stringify(s)!==JSON.stringify(n)&&this.playAudio()}playAudio(){let e=new Audio;e.src="../../../../assets/audio/new-ticket.mp3",e.autoplay=!0,e.load(),e.play()}}function S(i,e){1&i&&t.GkF(0)}function U(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"app-desktop",8),t.NdJ("attend",function(a){t.CHM(n);const l=t.oxw(2);return t.KtG(l.attendTicket(a))}),t.ALo(1,"async"),t.qZA()}if(2&i){const n=t.oxw(2);t.Q6J("tickets",t.lcZ(1,2,n.ticketsToAttend$))("desktop",n.desktop)}}function x(i,e){if(1&i&&t.YNc(0,U,2,4,"app-desktop",7),2&i){const n=t.oxw();t.Q6J("ngIf","desktop"===n.screen)}}function O(i,e){1&i&&t._UZ(0,"app-home")}function D(i,e){if(1&i){const n=t.EpF();t.TgZ(0,"app-new-ticket",9),t.NdJ("newTicket",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.createNewTicket())}),t.ALo(1,"async"),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("tickets",t.lcZ(1,1,n.ticketsToAttend$))}}function Y(i,e){if(1&i&&(t._UZ(0,"app-public",10),t.ALo(1,"async")),2&i){const n=t.oxw();t.Q6J("tickets",t.lcZ(1,1,n.attendingTickets$))}}function J(i,e){1&i&&t._uU(0," not found ")}d.\u0275fac=function(e){return new(e||d)(t.Y36(p))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-public"]],inputs:{tickets:"tickets"},standalone:!0,features:[t.TTD,t.jDz],decls:11,vars:3,consts:[["valign","middle",1,"ticket-actual"],["id","lblTicket1",1,"ticket-actual-number"],["id","lblDesktop1",1,"ticket-actual-desktop"],[4,"ngFor","ngForOf"],["id","lblTicket2",1,"ticket-secondary"],["id","lblDesktop2"]],template:function(e,n){1&e&&(t.TgZ(0,"table")(1,"tr")(2,"td",0)(3,"span",1),t._uU(4),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"span",2),t._uU(7),t.qZA()(),t.TgZ(8,"td")(9,"table"),t.YNc(10,y,7,2,"tr",3),t.qZA()()()()),2&e&&(t.xp6(4),t.hij("Ticket ",null==n.lastTicket?null:n.lastTicket.id,""),t.xp6(3),t.hij("Desktop ",null==n.lastTicket?null:n.lastTicket.desktop,""),t.xp6(3),t.Q6J("ngForOf",n.previousTickets))},dependencies:[c.ez,c.sg]});class m{constructor(e,n){this.activatedRoute=e,this.ticketsService=n,this.ticketsToAttend$=this.ticketsService.ticketsToAttend$,this.attendingTickets$=this.ticketsService.attendingTickets$,this.activatedRoute.params.subscribe(s=>{this.screen=s.screen,this.desktop=s.desktop})}createNewTicket(){this.ticketsService.newTicket()}attendTicket({ticket:e,attendedId:n}){console.log(e),this.ticketsService.attendTicket(e,n)}}m.\u0275fac=function(e){return new(e||m)(t.Y36(T.gz),t.Y36(p))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-cues"]],standalone:!0,features:[t.jDz],decls:13,vars:3,consts:[[1,"cues-container"],[4,"ngTemplateOutlet"],["desktopTmpl",""],["homeTmpl",""],["newTicketTmpl",""],["publicTmpl",""],["notFoundTmpl",""],[3,"tickets","desktop","attend",4,"ngIf"],[3,"tickets","desktop","attend"],[3,"tickets","newTicket"],[3,"tickets"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0),t.YNc(2,S,1,0,"ng-container",1),t.YNc(3,x,1,1,"ng-template",null,2,t.W1O),t.YNc(5,O,1,0,"ng-template",null,3,t.W1O),t.YNc(7,D,2,3,"ng-template",null,4,t.W1O),t.YNc(9,Y,2,3,"ng-template",null,5,t.W1O),t.YNc(11,J,1,0,"ng-template",null,6,t.W1O),t.qZA()),2&e){const s=t.MAs(4),a=t.MAs(6),l=t.MAs(8),F=t.MAs(10),$=t.MAs(12);t.xp6(1),t.ekj("p-4","public"!==n.screen),t.xp6(1),t.Q6J("ngTemplateOutlet","desktop"===n.screen?s:"home"===n.screen?a:"new-ticket"===n.screen?l:"public"===n.screen?F:$)}},dependencies:[c.ez,c.O5,c.tP,c.Ov,C.S,r,k,u,d],styles:[".cues-container[_ngcontent-%COMP%]{height:36rem;width:100%;background-color:#6951f0;color:#fff}"]})}}]);